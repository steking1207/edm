!function(){"use strict";var e={root:document.documentElement,getUA:navigator.userAgent.toLowerCase(),getPF:navigator.platform.toLowerCase(),browserInApp:!1,breakpoints:{xs:480,sm:768,md:992,lg:1200},script:document.currentScript?document.currentScript:document.querySelector('script[src*="urbrowser"]'),docSize:{width:function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},scrSize:{width:function(){return screen.width},height:function(){return screen.height}},classes:"",getNameByAgent:function(){var e=this.getUA,t=e.match(/msie|iemobile|line|fbav|twitter|micromessenger|mms|samsungbrowser|focus|acheetahi|ucbrowser|yabrowser|yolobrowser|firefox|fxios|puffin|mxbrowser|mxios|alohabrowser|kakaotalk|coast|beetalk|vivaldi|cordova|phonegap|react|nodejs|webview/i);return this.browserInApp=/line|fbav|twitter|micromessenger|kakaotalk|beetalk|cordova|phonegap|react|nodejs|webview/.test(e),t?t[0]:/(?=.*windows)(?=.*rv:)/.test(e)?"rv":/opr|opera|opios/.test(e)?e.match(/opr|opios/g)?e.match(/opr|opios/i)[0]:"version":!!/applewebkit/.test(e)&&(/edge/.test(e)?"edge":/chrome/.test(e)?"chrome":/crios/.test(e)?"crios":/version/.test(e)?"version":"safari")},getBrowserVersionsByName:function(){var e,t=this,o=t.getUA,i=t.cache.getNameByAgent||t.getNameByAgent();if(i){var r=i.length,s=o.indexOf(i)+r+1,n=/[0-9\.]*/g;return e=o.substr(s,20).match(n)[0],{int:parseInt(e,10),full:e}}},getBrowserWithCoreNames:function(){var e=this,t=e.getUA,o=e.cache.getNameByAgent||e.getNameByAgent(),i=e.cache.getBrowserVersionsByName||e.getBrowserVersionsByName(),r=" webkit",s=o||"unknown",n=!!o&&o.match(/line|fbav|twitter|kakaotalk|micromessenger|beetalk|samsungbrowser|focus|acheetahi|alohabrowser|yabrowser|yolobrowser|mxbrowser|mxios|fxios/i);if(i=i.int,n)"fbav"===(s=n[0])?s="facebook":"twitter"===s?i=null:"samsungbrowser"===s?s="samsung":"alohabrowser"===s?s="aloha":"yabrowser"===s?s="yandex":"yolobrowser"===s?s="yolo":"mxbrowser"===s||"mxios"===s?s="maxthon":"acheetahi"===s?s="armorfly":"fxios"===s&&(r=" firefox webkit");else if(/firefox/.test(o))r=/gecko/.test(t)?" gecko":" webkit";else if(/opr|opera|opios|coast|mms/.test(o))s="coast"===o?"coast opera":"mms"===o?"opera opera-neon":"opera",r=/applewebkit/.test(t)?" webkit":" presto";else if(/version|chrome|crios|safari/.test(o))s="safari","edge"===o?s="edge":"chrome"===o||"crios"===o?s="chrome":"version"===o&&/android/.test(t)&&(s="adrBuiltin");else if(/msie|rv|iemobile/.test(o))r="",s="ie";else{var a=o.match(/cordova|phonegap|react|nodejs|webview/i);a?(r=" webkit",-1!==t.indexOf("-android")?s=a+"-adr "+a:-1!==t.indexOf("-ios")&&(s=a+"-ios "+a),i=null):/iemobile|msie/.test(t)?r=" ie":/applewebkit/.test(t)&&(r=/chrome|crios/.test(t)?" chrome webkit":/version/.test(t)&&/android/.test(t)?" adrBuiltin webkit":" safari webkit")}!/chrome/.test(t)||/chrome/.test(s)||/chrome/.test(r)||(s+=" chrome");var c=s+r;if("ie"===s&&i){var d=s.split(" ")[0]+""+i,u=c.split(" ");if(c=i>1?u[0]+" "+d:u[0],u.length>1)for(var m=1;m<u.length;m++)c+=" "+u[m];for(var g=+i;g<11;g++)c+=" "+s+(g+1)+"lt"}return e.classes=c,c},getPlatform:function(){var e=this,t=e.getUA,o=e.getPF,i=o.match(/ipad|ipod|android|nintendo|blackberry|freebsd|openbsd/i);return i?i[0]:/os\/2|pocket pc|win16|win32|win64|wince/.test(o)?/windows ce|windows mobile|windows phone|zunewp|xblwp|iemobile|windows nt 6.[23]; arm/.test(t)?"wp":"windows":/arm/.test(o)?/windows phone|iemobile/.test(t)?"wp":/android/.test(t)?"android":"arm":/linux/.test(o)?/cros/.test(t)?"chromeos":/(?=.*windows)(?=.*mxbrowser)|android/.test(t)?"android":/iphone|pike/.test(t)?"iphone":/ipad/.test(t)?"ipad":/ipod/.test(t)?"ipod":"linux":/iphone|pike/.test(o)?"iphone":/mac|macintel|macintosh|macppc|mac68k/.test(o)?"mac":/x11|hp\-ux/.test(o)?"unix":/sunos/.test(o)?"solaris":/playstation|psp/.test(o)?"playstation":/palmos|webos/.test(o)?"palm":/s60|symbian|\\bseries\\b/.test(o)?"symbian":"unknown"},getOSName:function(){var e=this,t=e.getUA,o=e.cache.getPlatform||e.getPlatform();return/iphone|ipad|ipod/.test(o)?"ios":"windows"===o&&/windows nt/.test(t)?"windows nt":"linux"===o?/centos/.test(t)?"centos":/ubuntu/.test(t)?"ubuntu":o:o},getOSVersion:function(){var e=this,t=e.getUA,o=e.cache.getPlatform||e.getPlatform(),i=e.cache.getOSName||e.getOSName(),r=/mac|ios/.test(o)?/[0-9_]*/g:/[0-9\.]*/g;"wp"===i?i=/windows ce.*(ppc|smartphone|mobile|[0-9]{3}x[0-9]{3})|window mobile|windows phone [0-9.]+|wce;/.test(t)?"windows mobile":"windows phone":"ipad"===o||/ipad/.test(t)?i="cpu os":"iphone"===o||/iphone/.test(t)?i="iphone os":"ipod"===o||/ipod/.test(t)?i="ipod os":"mac"===i?i="mac os x":"chromeos"==i&&(i="cros i686");var s=i.length,n=t.indexOf(i)+s+1,a=t.substr(n,10);return(a=a.match(r)[0]).replace(/[_]+/g,".")},getBrowserNames:function(){var e=this,t=e.root,o=e.cache.getBrowserWithCoreNames||e.getBrowserWithCoreNames(),i=t.className,r=o?o.split(" ")[0]:"unknown";return i.length&&(o=-1===i.indexOf(r)?i+" "+o:i),{name:r,classes:o}},getBrowserFullVersion:function(){var e=this,t=e.cache.getBrowserVersionsByName||e.getBrowserVersionsByName();return t.full?t.full:"unknown"},getDevices:function(){var e,t=this,o=t.getUA,i=t.cache.getPlatform||t.getPlatform();return e=o.match(/mobile|tablet|phone|android/)&&(window.orientation,!0)?"mobile":"android"===i?"mobile":"desktop",t.classes=e+" "+t.classes,e},getOrientation:function(){var e=this,t=e.cache.docWidth||e.docSize.width(),o=e.cache.docHeight||e.docSize.height(),i=e.cache.getDevices||e.getDevices();return"desktop"!==(i=i.type)&&void 0!==window.orientation?90==Math.abs(window.orientation)?"landscape":"portrait":t>=o?"landscape":"portrait"},isInApp:function(){var e=this,t=e.getUA;return!!/line|fbav|kakaotalk|micromessenger|twitter|beetalk/.test(t)&&e.getOSName()},isWebView:function(){var e=this.getUA,t=!!/cordova|phonegap|react|nodejs|webview/.test(e);return t&&(-1!=e.indexOf("ios")?t="ios":-1!=e.indexOf("android")&&(t="android")),t},getLayoutMode:function(){var e=this,t=e.breakpoints,o=e.cache.srcWidth||e.scrSize.width(),i=e.cache.getDevices||e.getDevices(),r=e.cache.isWebView||e.isWebView(),s="mobile";return("desktop"===i||"tablet"===i&&o>=t.md)&&!r&&(s="desktop"),s},cookies:{isEnaled:function(){var e=navigator.cookieEnabled;return e||(document.cookie="testcookie",e=-1!==document.cookie.indexOf("testcookie")),e},getDomainByAttr:function(){var t=window.location.hostname,o=function(){var t=e.script.src,o="domain".replace(/[\[\]]/g,"\\$&"),i=new RegExp("[?&]"+o+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},i=!!o()&&o();return(i=i||e.script.getAttribute("data-domain"))&&-1!==t.indexOf(i)?i:t},get:function(){for(var e=document.cookie.split(";"),t=[],o=0;o<e.length;o++){for(var i=e[o];" "===i.charAt(0);)i=i.substring(1);0===i.indexOf("urbrowser=")&&t.push(i.substring("urbrowser=".length,i.length))}return t.length>0&&t},set:function(t,o){var i=this;if(i.isEnaled()){i.remove();var r="urbrowser="+t,s=t.length>0?365:-1,n=location.href,a=i.getDomainByAttr();r+="; expires="+(s=new Date((new Date).getTime()+1e3*s*60*60*24+288e5)).toUTCString()+"; domain="+a+"; path=/",document.cookie=r,!o||-1!==n.indexOf("file:///")||e.browserInApp&&i.get()||location.reload()}else console.log("Please open browser cookie.")},remove:function(){function e(e,i){document.cookie="urbrowser=; expires="+o;for(var r=0;r<e.length;r++){var s="urbrowser=; expires="+o+"; path="+e[r]+"; domain="+t;document.cookie=s;for(var n=0;n<i.length;n++){var a="urbrowser=; expires="+o+"; path="+e[r]+"; domain="+i[n];document.cookie=a}}}var t=this.getDomainByAttr(),o=new Date(0).toUTCString();!function(){var t=location.pathname.replace(/\/$/,"").split("/"),o=[],i=window.location.hostname.split("."),r=[],s="";i.reverse();for(var n,a=0,c=t.length;a<c;a++)n=t.slice(0,a+1).join("/"),o.push(n),o.push(n+"/");for(var d=0;d<i.length;d++)s=0===s.length?i[d]:i[d]+"."+s,r.push(s),r.push("."+s);e(o,r)}()},rebuild:function(e){this.remove(),e=JSON.stringify(e),this.set(e,!0)}},storage:{get:function(e){e=e||"string";var t=localStorage.getItem("urbrowser");return"json"===e?JSON.parse(t):t},set:function(t,o){var i=e.script.getAttribute("data-reload");o=!!i&&("true"===i&&o),localStorage.removeItem("urbrowser"),t?(t=JSON.stringify(t),localStorage.setItem("urbrowser",t),e.cookies.set(t,o)):(localStorage.removeItem("urbrowser"),e.cookies.remove())},reset:function(t){var o=e.script.getAttribute("data-reload"),i=!o||"true"===o;localStorage.removeItem("urbrowser"),e.cookies.remove(),t=JSON.stringify(t),localStorage.setItem("urbrowser",t),e.cookies.set(t,i)}},cache:{}};({project:{name:"urBrowser",version:"3.171101",author:"Kei Cheng",github:"https://github.com/keicheng/urbrowser",website:"http://urbrowser.kule.tw",facebook:"https://www.facebook.com/kule.tw",cdnjs:"https://cdnjs.com/libraries/kule.lazy",license:"MIT License"},init:function(){var t=this,o=e,i=o.cache;return i.project=t.project.name,i.version=t.project.version,i.author=t.project.author,i.getNameByAgent=o.getNameByAgent(),i.getPlatform=o.getPlatform(),i.getBrowserWithCoreNames=o.getBrowserWithCoreNames(),i.getOSName=o.getOSName(),i.getBrowserNames=o.getBrowserNames(),i.getDevices=o.getDevices(),i.getOrientation=o.getOrientation(),i.isInApp=o.isInApp(),i.isWebView=o.isWebView(),i.getLayoutMode=o.getLayoutMode(),i.classes=o.classes,i},buildBase:function(t){var o=this,i=e.root;t=t||o.init(),i.id=t.getPlatform,i.className=t.classes,i.setAttribute("data-browser-name",t.getBrowserNames.name),i.setAttribute("data-os-name",t.getOSName),i.setAttribute("data-device",t.getDevices),i.setAttribute("data-layout-mode",t.getLayoutMode),i.setAttribute("data-inapp",t.isInApp),i.setAttribute("data-webview",t.isWebView),i.setAttribute("data-ub-version",t.version)},build:function(t,o){var i=this;t=t||i.init(),o=o||!0,i.buildBase(t),e.storage.set(t,o)},rebuild:function(){var t=this,o=t.init();t.buildBase(o),e.storage.reset(o,!0)},update:function(){var t=this,o=e,i=o.storage.get("josn"),r=t.init(),s=!1;i.getBrowserWithCoreNames&&i.getBrowserWithCoreNames===r.getBrowserWithCoreNames&&i.getLayoutMode&&i.getLayoutMode===r.getLayoutMode&&i.version&&i.version===r.version||(s=!0),o.cache=r,t.build(r,s)},diff:function(t){var o=this,i=e,r=i.storage.get(),s=t||i.cookies.get()[0],n=JSON.stringify(o.init());return r!=n||s!=n},resizing:function(t){var o=this,i=e,r=i.root,s=o.init(),n="mobile"===s.getDevices.type&&"tablet"===s.getDevices.device;!(t=t||!1)&&n&&r.setAttribute("data-layout-mode",s.getLayoutMode),i.storage.set(s,t)},run:function(){var t,o=this;if(void 0===window.addEventListener||"undefined"==typeof JSON||"undefined"==typeof localStorage)o.buildBase();else{var i=e,r=i.storage.get("json"),s=i.cookies.get();r?(s.length>1&&(i.cookies.remove(),s=i.cookies.get()[0]),o.diff(s)?o.update():o.buildBase(r)):o.build();var n=i.cache;"mobile"===n.getDevices.type&&"tablet"===n.getDevices.device?window.addEventListener("orientationchange",function(){o.resizing(!0)},!1):window.addEventListener("resize",function(){clearTimeout(t),t=setTimeout(function(){o.resizing(!1)},500)},!1)}}}).run()}(window);
